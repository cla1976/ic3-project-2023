{% extends 'admin/base_site.html' %}
{% load static %}
{% block content %}
<script src="{% static 'custom/jquery-3.6.4.min.js' %}"></script>

<script>
  $(document).ready(function() {
      $("#myInput").on("keyup", function() {
          var value = $(this).val().toLowerCase();
          $(".dropdown-menu li").filter(function() {
              $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
          });
      });
  
      $(".dropdown-menu li a").click(function() {
          var device = $(this).text();
          var url = 'individual/' + device + '/';
          window.location.href = url;
      });
  
      $("#openAllButton").click(function (event) {
        event.preventDefault();
        let url = "/video/massive_door_opening/";
        $.ajax({
          url: url,
          type: "GET",
          success: function (data) {
            console.log(data);
          },
        });
      });
  
      $('.dropdown-btn').click(function() {
          $(this).next('.dropdown-menu').toggle();
      });
  
      $(document).on('click', function(event) {
          if (!$(event.target).closest('.dropdown').length) {
              $(".dropdown-menu").hide();
          }
      });
  });
  </script>
  


<html>
  <head>
    <meta charset="utf-8">
    <title>Transmisión de video</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        background-color: #f2f2f2;
      }
      #video-container {
        width: 100vh;
        height: 600px;
        box-sizing: border-box;   
      }
      #container {
        display: flex;
        flex-direction: column;
        align-items: top;
        justify-content: top;
        height: 100vh;
      }
      #video {
        border: 5px solid black;
        background-color: #000000;
      }
      #form-container {
        margin-top: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      #my-form {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      #my-form button {
        padding: 10px 20px;
        background-color: #28B62C;
        color: #white;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
        margin-left: 20px;
        font-weight: bold;
        font-size: small;
        border-bottom: 5px solid #23A127;
      }
      #my-form button:hover {
        background-color: #333333;
      }
      .dropdown-btn {
          padding: 10px 20px;
          background-color: #337ab7;
          color: #fff;
          border: none;
          border-radius: 5px;
          font-size: 16px;
          cursor: pointer;
          margin-bottom: 10px;
      }

      .dropdown-menu {
          display: none;
          position: absolute;
          background-color: #f9f9f9;
          min-width: 160px;
          box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
          z-index: 1;
      }

      .dropdown-menu li {
          padding: 12px 16px;
          text-decoration: none;
          display: block;
      }

      .dropdown-menu li a {
          color: #333;
      }

      .dropdown-menu li a:hover {
          background-color: #ddd;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <div class="dropbox-">
        <h2>Selecciona un dispositivo:</h2>
        <div class="dropdown">
            <button class="dropdown-btn">Dispositivos ▼</button>
            <ul class="dropdown-menu">
                <input class="form-control" id="myInput" type="text" placeholder="Buscar dispositivos..">
                {% for device in devices %}
                <li><a href="#">{{ device }}</a></li>
                {% endfor %}
            </ul>
          </div>
      </div>
        <div id="video-container">
            <iframe src=" {{ link }}" width="100%" height="100%" frameborder="0"></iframe>
        </div>
            <div id="form-container">
              <form id="my-form">
                {% csrf_token %}
                <button id="openAllButton" type="button">Apertura masiva puertas</button>
              </form>
            </div>
    </div>
  </body>
</html>


{% endblock %}